<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/css/style.css" type="text/css">
    <title>Students List</title>
</head>

<body class="container">
    <header class="row">
        <h1 class="col mx-auto py-5 text-center">Students List</h1>
    </header>
    <div class="row p-2 border border-dark my-3">
        <div class="col">
            <!--/*@thymesVar id="student" type="com.amigoscode.spring_course.Student"*/-->
    <!--        <form action="#" method="post" th:action="@{/addStudents}" th:object="${student}" >-->
            <form class="mx-auto px-auto" action="#" th:action="register" th:method="post" th:object="${studentForm}" >
                <fieldset>
                    <legend class="text-center">Add New Student</legend>
                    <label for="name-box" class="my-form-label">Name</label>
                    <input type="text" id="name-box" th:field="*{name}" name="name">
                </fieldset>
                <fieldset>
                    <label for="email-box" class="my-form-label">Email</label>
                    <input type="text" id="email-box" th:field="*{email}">
                </fieldset>
                <fieldset>
                    <label for="date-box" class="my-form-label">Date Of Birth</label>
                    <input type="date" id="date-box" name="date"
                           th:date="${#temporals.format(localDate, 'yyyy-MM-dd')}"
                           th:field="*{dob}">
                </fieldset>
                <button class="btn btn-secondary mx-2 mt-3" type="submit">Submit</button>
                <button class="btn btn-secondary mx-2 mt-3" type="reset"
                        name="reset" th:value="Reset">Reset</button>
            </form>
        </div>
    </div>

    <!--  Message  -->
    <div>
        <h3 th:test="${message}">message</h3>
    </div>

    <table class="row p-2 border border-dark my-3 table table-stripe">
        <div class="col-12">
            <thead class="text-center">
                <tr class="row" th:if="${students.empty}">
                    <td class="text-center" colspan="2" >No Students in the database</td>
                </tr>
                <tr class="row">
                    <th scope="col" class="col-1 col-md-1">#</th>
                    <th scope="col" class="col-5 col-md-3">Name</th>
                    <th scope="col" class="col-5 col-md-3">Email</th>
                    <th scope="col" class="col-1 col-md-1">Age</th>
                    <th scope="col" class="d-none d-md-inline col-md-4">Functions</th>
                </tr>
            </thead>
            <tbody>
                <tr class="row border-bottom" th:each="student: ${students}">
                    <td class="col-1 col-md-1">
                        <span th:text="${student.getId()}"> Id </span>
                    </td>
                    <td class="col-5 col-md-3">
                        <span th:text="${student.getName()}"> Name </span>
                    </td>
                    <td class="col-5 col-md-3">
                        <span th:text="${student.getEmail()}"> Email </span>
                    </td>
                    <td class="col-1 col-md-1">
                        <span th:text="${student.getAge()}"> Age </span>
                    </td>
                    <td class="col-12 col-md-4">
                        <div class="row mx-3">
                            <a class="col btn btn-primary btn-sm px-auto mx-1"
                               th:href="@{/student/updateStudent/{id}(id=${student.getId()})}">
                                Edit
                            </a>
                            <a class="col btn btn-danger btn-sm px-auto mx-1"
                               th:href="@{/student/delete/{id}(id=${student.getId()})}">
                               Delete
                            </a>
                        </div>
                    </td>
                </tr>
            </tbody>
        </div>
    </table>
</body>
</html>